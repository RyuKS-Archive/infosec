---
layout: post
title:  "linux 퍼미션"
description: linux 
date:   2021-04-09
categories: linux proftpd
---
    
    
## linux 기본 자주 쓰는 기본 명령어와 파일 디렉토리 퍼미션
    
+ ls -al을 사용하면 파일과 디렉토리의 앞부분에 -rw- r-- r-- 와 같은 퍼미션 정보를 확인할 수 있다
    
+ 퍼미션
```
-rw- r-- r-- 는 파일을 생성했을시 기본 접근 권한으로 제일 앞의 부분 -는 파일을 나타내고
             첫 번째 rw-는 root유저의 권한 두 번째 r--는 그룹의 권한 세 번째 r--는 그 외 유저들의 권한을 나타낸다
             권한은 rwx 세가지 로마자로 표현을 하는데 r은 읽기권한, w는 쓰기권한, x는 실행권한을 나타낸다
             
             그리고 rwx의 로마자는 2진수 3비트의 숫자로 표현할 수 있는데 오른쪽 부터 2의0승 2의1승 2의2승의 
             값으로 표현 가능하고 각 root 그룹 그외유저의 권한은 각각의 2진수 3비트의 합으로 표현을 한다
             
             파일 생성 기본 퍼미션인 rw- r-- r-- 를 2진수 3비트의 합으로 표현하면 
             root권한은 rw- 실행권한이 없으니 0 그리고 읽기 4 쓰기 2 의 권한을 가지고 있으니 6으로 표현 가능하다
             그룹권한은 r-- 쓰기와 실행권한이 없으니 각각 0 그리고 읽기 4의 권한만 가지고 있으니 4로 표현한다
             그 외 유저의 권한은 r-- 그룹과 마찬가지로 쓰기와 실행권한이 없고 읽기 권한만 가지고 있어 4로 표현하여
             해당 파일의 퍼미션은 644로 표현할 수 있다
             
             rw- r-- r--
              6   4   4
```
    
+ 파일 생성 디렉토리 생성의 기본 퍼미션은 umask로 설정이 가능하다 umask 기본 값은 0022
+ 기본 퍼미션 설정인 umask를 보게 되면 4자리인데 제일 앞자리는 슈퍼비트이다\
    
+ 슈퍼비트
```
-rws rws rwt 각 권한의 마지막 실행권한 표시에는 root와 그룹은 s로 그 외 유저권한은 t로도 표현이 가능한데 
             슈퍼비트를 설정하게 되면 이렇게 표현이 가능하다
             
             root의 s는 setUID 그룹의 s는 setGID 그 외 유저 t는 sticky bit를 의미하고 설정하게 되면
             각각 소유자 권한으로 실행, 소유 그룹권한으로 실행, 누구나 실행가능의 의미를 가진다
             
             슈퍼비트와 퍼미션을 합쳐서 2진수 4비트로 권한을 표현할 수 있는데 (슈퍼비트가 설정이 되면 실행권한 퍼미션 1은 자동으로 주어지게 된다)            
             슈퍼비트는 sticky bit 가 설정이 되면 1, setGID가 설정이 되면 2, setUID가 설정이 되면 4로 
             슈퍼비트의 합을 퍼미션 제일 앞부분에 표기하면 된다.
             
             -rws rw- r--를 2진수 4비트로 표현하면 슈퍼비트는 root의 s 뿐이니 setUID의 4를 제일 앞에 표기하고 나머지 퍼미션을 표기한다
           4   7   6   4 
           
             -rwx rws r--를 2진수 4비트로 표현하면 슈퍼비트는 setGID의 s의 2 뿐이니 2를 제일 앞에 표기하고 나머지 퍼미션을 표기한다
           2   7   7   4 
           
             -rwx rw- r-t를 2진수 4비트로 표현하면 슈퍼비트는 sticky bit의 1 뿐이니 1을 제일 앞에 표기하고 나머지 퍼미션을 표기한다
           1   7   6   5
```
    
+ 퍼미션의 설정
```
chmod [2진수 3비트 퍼미션] [파일, 디렉토리 명]
chown [소유자명] : [소유 그룹명] [파일, 디렉토리 명] ( : 소유 그룹명 생략가능)
chgrp [소유 그룹명] [파일, 디렉토리 명]

예시) chmod 755 test.txt
      chown testUser : testGroup test.txt
      chown testGroup test.txt
```
    
+ 유저 추가
```
useradd [유저명]
passwd [유저명] - 비밀번호 입력 - 재입력

예시) useradd testUser
      passwd testUser
      (비밀번호 입력 메시지) : 123qwe (엔터)
      (비밀번호 재입력 메시지) : 123qwe (엔터)
```

